#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
vibes — управление Telegram-ботом (запуск в фоне / статус / стоп).

This is a thin wrapper around `src/vibes_app/daemon/*`.
"""

from __future__ import annotations

import sys
from pathlib import Path
from typing import Any, Dict, Optional, Sequence


_ROOT = Path(__file__).resolve().parent
_SRC = _ROOT / "src"
if _SRC.exists() and str(_SRC) not in sys.path:
    sys.path.insert(0, str(_SRC))

from vibes_app.daemon.envfile import parse_env_file as _parse_env_file  # noqa: E402
from vibes_app.daemon.envfile import pick_int as _pick_int  # noqa: E402
from vibes_app.daemon.envfile import pick_str as _pick_str  # noqa: E402
from vibes_app.daemon.process import looks_like_vibes_process as _looks_like_vibes_process  # noqa: E402
from vibes_app.daemon.process import parse_ps_etime as _parse_ps_etime  # noqa: E402
from vibes_app.daemon.state import load_state as _load_state  # noqa: E402
from vibes_app.daemon.state import write_state as _write_state  # noqa: E402


def main(argv: Optional[Sequence[str]] = None) -> int:
    from vibes_app.daemon.cli import main as _main  # noqa: E402

    return _main(argv, root=_ROOT)


if __name__ == "__main__":
    raise SystemExit(main())

